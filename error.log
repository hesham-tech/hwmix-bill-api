[2026-02-06 15:49:39] SERVER_ERROR: Request failed with status code 500
Severity: MEDIUM | Browser: Chrome 144 | OS: Windows
URL: http://localhost:5173/app/users?page=1&per_page=-1&sort_by=created_at&sort_order=desc&search=%D8%A7%D8%A8%D9%88+%D9%86%D8%AF%D9%8A
User: Guest (Guest)
Payload: {
    "timestamp": "2026-02-06T15:49:28.179Z",
    "timezone": "Africa\/Cairo",
    "locale": "ar",
    "route": "\/app\/users",
    "screen": {
        "width": 1393,
        "height": 869
    },
    "request": {
        "method": "PUT",
        "url": "users\/5",
        "data": "{\"roles\":[],\"permissions\":[\"admin.company\"]}"
    },
    "status": 500,
    "code": "ERR_BAD_RESPONSE",
    "serverMessage": "خطأ في جلب البيانات",
    "serverResponse": {
        "status": false,
        "message": "خطأ في جلب البيانات",
        "error": "SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-5-App\\Models\\User' for key 'model_has_permissions.PRIMARY' (Connection: mysql, SQL: insert into `model_has_permissions` (`company_id`, `model_id`, `model_type`, `permission_id`) values (10, 5, App\\Models\\User, 3))",
        "exception": "Illuminate\\Database\\UniqueConstraintViolationException",
        "file": "D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php",
        "line": 820,
        "trace": [
            "#0 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(779): Illuminate\\Database\\Connection->runQueryCallback('insert into `mo...', Array, Object(Closure))",
            "#1 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(42): Illuminate\\Database\\Connection->run('insert into `mo...', Array, Object(Closure))",
            "#2 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3747): Illuminate\\Database\\MySqlConnection->insert('insert into `mo...', Array)",
            "#3 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Relations\\Concerns\\InteractsWithPivotTable.php(276): Illuminate\\Database\\Query\\Builder->insert(Array)",
            "#4 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\spatie\\laravel-permission\\src\\Traits\\HasPermissions.php(403): Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany->attach(Array, Array)",
            "#5 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\spatie\\laravel-permission\\src\\Traits\\HasPermissions.php(451): App\\Models\\User->givePermissionTo(Array)",
            "#6 D:\\Dev\\projects\\hwnix-bill-api\\app\\Http\\Controllers\\UserController.php(549): App\\Models\\User->syncPermissions(Array)",
            "#7 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(46): App\\Http\\Controllers\\UserController->update(Object(App\\Http\\Requests\\User\\UserUpdateRequest), Object(App\\Models\\User))",
            "#8 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(264): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\UserController), 'update')",
            "#9 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(210): Illuminate\\Routing\\Route->runController()",
            "#10 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(808): Illuminate\\Routing\\Route->run()",
            "#11 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))",
            "#12 D:\\Dev\\projects\\hwnix-bill-api\\app\\Http\\Middleware\\ScopePermissionsByCompany.php(31): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#13 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\ScopePermissionsByCompany->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#14 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Middleware\\SubstituteBindings.php(51): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#15 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#16 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Auth\\Middleware\\Authenticate.php(64): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#17 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure), 'sanctum')",
            "#18 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#19 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(807): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))",
            "#20 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(786): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))",
            "#21 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(750): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))",
            "#22 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(739): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))",
            "#23 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(201): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))",
            "#24 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))",
            "#25 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#26 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#27 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#28 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#29 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(51): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#30 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#31 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#32 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#33 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(110): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#34 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#35 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#36 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#37 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(58): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#38 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#39 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\InvokeDeferredCallbacks.php(22): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#40 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\InvokeDeferredCallbacks->handle(Object(Illuminate\\Http\\Request), Object(Closure))",
            "#41 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))",
            "#42 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(176): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))",
            "#43 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(145): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))",
            "#44 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Application.php(1188): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))",
            "#45 D:\\Dev\\projects\\hwnix-bill-api\\public\\index.php(17): Illuminate\\Foundation\\Application->handleRequest(Object(Illuminate\\Http\\Request))",
            "#46 D:\\Dev\\projects\\hwnix-bill-api\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(23): require_once('D:\\\\Dev\\\\projects...')",
            "#47 {main}"
        ]
    },
    "user_id": 1,
    "username": "system_owner"
}
Stack Trace Snippet: AxiosError: Request failed with status code 500
    at settle (http://localhost:5173/node_modules/.vite/deps/axios.js?v=9617f2c6:1235:12)
    at XMLHttpRequest.onloadend (http://localhost:5173/node_modules/.vite/deps/axios.js?v=9617f2c6:1566:7)
    at Axios.request (http://localhost:5173/node_modules/.vite/deps/axios.js?v=9617f2c6:2124:41)
    at async UserService.update (http://localhost:5173/src/api/services/user.service.js?t=1770392790563:61:24)
    at async Proxy.updateUser (http://loca...
--------------------------------------------------
